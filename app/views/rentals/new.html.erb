<!-- Infos sur la voiture -->
<h1>Réservation pour la voiture</h1>
<p><strong>Voiture :</strong> <%= @car.desc %></p>
<img src="<%= @car.img %>" alt="Photo de la voiture" width="300">
<% if flash[:alert] %>
  <div class="alert alert-danger">
    <%= flash[:alert] %>
  </div>
<% end %>

<%= form_with model: @rental, url: rentals_path, method: :post,
    data: { controller: "rental-price", rental_price_price_per_day_value: @car.price.to_i } do |f| %>

  <%= f.hidden_field :car_id, value: @car.id %>

  <div>
    <%= f.label :start_date, "Date de début" %>
    <%= f.date_field :start_date, required: true,
        data: { action: "input->rental-price#calculate", rental_price_target: "startDate" } %>
  </div>

  <div>
    <%= f.label :end_date, "Date de fin" %>
    <%= f.date_field :end_date, required: true,
        data: { action: "input->rental-price#calculate", rental_price_target: "endDate" } %>
  </div>

  <div>
  </div>

  <div>
    <p><strong>Prix :</strong><span data-rental-price-target="price"><%= @car.price %></span> €</p>
    <p><strong>Nombre de jours :</strong> <span data-rental-price-target="days">0 jrs</span></p>
    <p><strong>total :</strong> <span data-rental-price-target="totalPrice">Calcul en cours...</span> €</p>
  </div>


  <%= f.submit "Réserver", class: "btn btn-success" %>
<% end %>



<%= link_to "Retour à la liste des voitures", cars_path, class: "btn btn-secondary mt-2" %>
